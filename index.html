<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SNMP: SNMP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<!-- Doxygen Awesome Extensions -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init();
  DoxygenAwesomeFragmentCopyButton.init();
  DoxygenAwesomeInteractiveToc.init();
  DoxygenAwesomeParagraphLink.init();
  DoxygenAwesomeTabs.init();
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SNMP<span id="projectnumber">&#160;2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md1">Compatibility</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md2">Configuration</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md3">Usage</a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md4">Agent</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md5">Manager</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md6">Limitations</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md7">Migrate to version 2.0.0</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md8">Acknowledgements</a>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a></p>
<p><a href="https://github.com/patricklaf/SNMP/releases/latest"><img src="https://img.shields.io/github/v/release/patricklaf/SNMP" alt="GitHub release" class="inline"/></a> <a href="https://github.com/patricklaf/SNMP/issues"><img src="https://img.shields.io/github/issues/patricklaf/SNMP" alt="GitHub issues" class="inline"/></a></p>
<p>Simple Network Management Protocol library to write agent or manager for Arduino boards.</p>
<p>The library supports:</p>
<ul>
<li><a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> protocol version<ul>
<li>v1</li>
<li>v2c</li>
</ul>
</li>
<li><a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> messages<ul>
<li>GETREQUEST</li>
<li>GETNEXTREQUEST</li>
<li>GETRESPONSE</li>
<li>SETREQUEST</li>
<li>TRAP</li>
<li>GETBULKREQUEST</li>
<li>INFORMREQUEST</li>
<li>SNMPV2TRAP</li>
</ul>
</li>
<li><a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> objects<ul>
<li>Boolean</li>
<li>Integer</li>
<li>OctetString</li>
<li>Null</li>
<li>ObjectIdentifier</li>
<li>Sequence</li>
<li>IPAddress</li>
<li>Counter32</li>
<li>Gauge32</li>
<li>TimeTicks</li>
<li>Opaque</li>
<li>Counter64</li>
<li>Float</li>
<li>OpaqueFloat</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
Compatibility</h1>
<p>The library is developed and tested on several boards and architectures:</p>
<ul>
<li>Adafruit Huzzah32 and Olimex ESP32-PoE (ESP32)</li>
<li>Arduino Uno and Arduino Mega 2560 (AVR)</li>
<li>NUCLEO-F429ZI and NUCLEO-F767ZI (STM32)</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Configuration</h1>
<p>Some conditional defines are used to set options at compile time.</p>
<ul>
<li><em>SNMP_STREAM</em> <br  />
If set to 1, packets are parsed and built with stream functions, with low memory usage. <br  />
If set to 0 or undefined, a buffer in RAM is allocated to read or write the entire packet, with high memory requirement. <br  />
It <b>must</b> be set to 1 for Arduino Uno board. The default is 1.</li>
<li><em>SNMP_VECTOR</em> <br  />
If set to 1, vectors are used. <br  />
If set to 0 or undefined, fixed size arrays are used. <br  />
As vectors are part of the STL, if you want to use them with Arduino Mega board the <a href="https://www.arduino.cc/reference/en/libraries/arduinostl/">ArduinoSTL</a> library is required. <br  />
It <b>must not</b> be used with Arduino Uno board. The default is 0.</li>
<li><em>SNMP_CAPACITY</em> <br  />
If arrays are used, this symbol defines the maximum number of items contained in a Sequence object. <br  />
The default is 6.</li>
</ul>
<p>A convenient way to configure the library is to use an optional <em>SNMPcfg.h</em> file at sketch level. The library will include it automatically and apply the configuration. This is an example of such a file.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef SNMPCFG_H_</span></div>
<div class="line"><span class="preprocessor">#define SNMPCFG_H_</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SNMP_STREAM 0 </span><span class="comment">// Buffers are used.</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SNMP_VECTOR 1 </span><span class="comment">// Vectors are used.</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SNMP_CAPACITY 6 </span><span class="comment">// Ignored, as vectors are used.</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* SNMPCFG_H_ */</span><span class="preprocessor"></span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Usage</h1>
<p>There is only one header to include to use the library.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_s_n_m_p_8h.html">SNMP.h</a>&gt;</span></div>
<div class="ttc" id="a_s_n_m_p_8h_html"><div class="ttname"><a href="_s_n_m_p_8h.html">SNMP.h</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Agent</h2>
<p>An <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> agent receives request from and sends response to an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> manager.</p>
<p>Declare an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> agent like this. An UDP client is also needed.</p>
<div class="fragment"><div class="line">EthernetUDP udp; <span class="comment">// STM32, use your own platform UDP class</span></div>
<div class="line"><a class="code hl_class" href="class_s_n_m_p_1_1_agent.html">SNMP::Agent</a> snmp;</div>
<div class="ttc" id="aclass_s_n_m_p_1_1_agent_html"><div class="ttname"><a href="class_s_n_m_p_1_1_agent.html">SNMP::Agent</a></div><div class="ttdoc">SNMP agent.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_8h_source.html#l00158">SNMP.h:158</a></div></div>
</div><!-- fragment --><p>In Arduino <em>setup()</em> function, add code to setup agent.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    Serial.begin(115200);</div>
<div class="line">    <span class="comment">// Ethernet</span></div>
<div class="line">    Ethernet.begin(IPAddress(192, 168, 2, 2), IPAddress(255, 255, 255, 0),</div>
<div class="line">            IPAddress(192, 168, 2, 1), IPAddress(192, 168, 2, 1));</div>
<div class="line">    <span class="comment">// SNMP</span></div>
<div class="line">    snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#ac55c933b9deab01516799988f5fc39a3">begin</a>(udp);</div>
<div class="line">    snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#af72237a388c52442eacc8c607527660e">onMessage</a>(onMessage);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_s_n_m_p_1_1_s_n_m_p_html_ac55c933b9deab01516799988f5fc39a3"><div class="ttname"><a href="class_s_n_m_p_1_1_s_n_m_p.html#ac55c933b9deab01516799988f5fc39a3">SNMP::SNMP::begin</a></div><div class="ttdeci">bool begin(UDP &amp;udp)</div><div class="ttdoc">Initializes network.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_8h_source.html#l00062">SNMP.h:62</a></div></div>
<div class="ttc" id="aclass_s_n_m_p_1_1_s_n_m_p_html_af72237a388c52442eacc8c607527660e"><div class="ttname"><a href="class_s_n_m_p_1_1_s_n_m_p.html#af72237a388c52442eacc8c607527660e">SNMP::SNMP::onMessage</a></div><div class="ttdeci">void onMessage(Event event)</div><div class="ttdoc">Sets on message event user handler.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_8h_source.html#l00130">SNMP.h:130</a></div></div>
</div><!-- fragment --><p>The user function <em>onMessage()</em> will be called every time an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> message is received.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> onMessage(<span class="keyword">const</span> <a class="code hl_class" href="class_s_n_m_p_1_1_message.html">SNMP::Message</a> *message, <span class="keyword">const</span> IPAddress remote, <span class="keyword">const</span> uint16_t port) {</div>
<div class="line">    <span class="comment">// Get the variable binding list from the message.</span></div>
<div class="line">    VarBindList *varbindlist = message-&gt;<a class="code hl_function" href="class_s_n_m_p_1_1_message.html#a4ddcb27e5d699a5ae0edcbbc00e8e165">getVarBindList</a>();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0; index &lt; varbindlist-&gt;count(); ++index) {</div>
<div class="line">        <span class="comment">// Each variable binding is a sequence of 2 objects:</span></div>
<div class="line">        <span class="comment">// - First one is and ObjectIdentifierBER. It holds the OID</span></div>
<div class="line">        <span class="comment">// - Second is the value of any type</span></div>
<div class="line">        VarBind *varbind = (*varbindlist)[index];</div>
<div class="line">        <span class="comment">// There is a convenient function to get the OID as a const char*</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *name = varbind-&gt;getName();</div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(SYSNAME_OID, name) == 0) {</div>
<div class="line">            <span class="comment">// System name is requested. We have to send a response.</span></div>
<div class="line">            <span class="comment">// Create an SNMP message for response</span></div>
<div class="line">            <a class="code hl_class" href="class_s_n_m_p_1_1_message.html">SNMP::Message</a> *response = <span class="keyword">new</span> <a class="code hl_class" href="class_s_n_m_p_1_1_message.html">SNMP::Message</a>(<a class="code hl_enumvalue" href="struct_s_n_m_p_1_1_version.html#a8013940cfd8d8412f5b7d4c4c4e3717ca1d0d1ca017fece1777c8a442b4602adb">SNMP::Version::V2C</a>, <span class="stringliteral">&quot;public&quot;</span>, <a class="code hl_enumvalue" href="class_s_n_m_p_1_1_type.html#a2f2b2d13883bc7ff2e042ce55d85522ea71726ae3f2a65e3a6b9eb9e74129105e">SNMP::Type::GetResponse</a>);</div>
<div class="line">            <span class="comment">// The response must have the same request-id as the request</span></div>
<div class="line">            response-&gt;<a class="code hl_function" href="class_s_n_m_p_1_1_message.html#a08d527a219ab96449affd6d276b063c4">setRequestID</a>(message-&gt;<a class="code hl_function" href="class_s_n_m_p_1_1_message.html#a289447b097117e52d8edd6aca97b3c78">getRequestID</a>());</div>
<div class="line">            <span class="comment">// SYSNAME</span></div>
<div class="line">            <span class="comment">// Create an OctetStringBER to hold the variable binding value</span></div>
<div class="line">            OctetStringBER* value = <span class="keyword">new</span> OctetStringBER(SYSNAME_VALUE);</div>
<div class="line">            <span class="comment">// Add the variable binding to the message</span></div>
<div class="line">            response-&gt;<a class="code hl_function" href="class_s_n_m_p_1_1_message.html#a811f708a70ebfaa7c541b532424c497d">add</a>(SYSNAME_OID, value);</div>
<div class="line">            <span class="comment">// Send the response to remote IP and port</span></div>
<div class="line">            snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#a2b07468ab8fee2bc1f5061cf65055f25">send</a>(response, remote, port);</div>
<div class="line">            <span class="comment">// Avoid memory leak</span></div>
<div class="line">            <span class="keyword">delete</span> response;</div>
<div class="line">       }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_s_n_m_p_1_1_message_html"><div class="ttname"><a href="class_s_n_m_p_1_1_message.html">SNMP::Message</a></div><div class="ttdoc">SNMP message object.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_message_8h_source.html#l00110">SNMPMessage.h:110</a></div></div>
<div class="ttc" id="aclass_s_n_m_p_1_1_message_html_a08d527a219ab96449affd6d276b063c4"><div class="ttname"><a href="class_s_n_m_p_1_1_message.html#a08d527a219ab96449affd6d276b063c4">SNMP::Message::setRequestID</a></div><div class="ttdeci">void setRequestID(const int32_t requestId)</div><div class="ttdoc">Sets the request identifier.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_message_8h_source.html#l00231">SNMPMessage.h:231</a></div></div>
<div class="ttc" id="aclass_s_n_m_p_1_1_message_html_a289447b097117e52d8edd6aca97b3c78"><div class="ttname"><a href="class_s_n_m_p_1_1_message.html#a289447b097117e52d8edd6aca97b3c78">SNMP::Message::getRequestID</a></div><div class="ttdeci">const int32_t getRequestID() const</div><div class="ttdoc">Gets the request identifier.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_message_8h_source.html#l00220">SNMPMessage.h:220</a></div></div>
<div class="ttc" id="aclass_s_n_m_p_1_1_message_html_a4ddcb27e5d699a5ae0edcbbc00e8e165"><div class="ttname"><a href="class_s_n_m_p_1_1_message.html#a4ddcb27e5d699a5ae0edcbbc00e8e165">SNMP::Message::getVarBindList</a></div><div class="ttdeci">VarBindList * getVarBindList() const</div><div class="ttdoc">Gets the variable bindings list.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_message_8h_source.html#l00371">SNMPMessage.h:371</a></div></div>
<div class="ttc" id="aclass_s_n_m_p_1_1_message_html_a811f708a70ebfaa7c541b532424c497d"><div class="ttname"><a href="class_s_n_m_p_1_1_message.html#a811f708a70ebfaa7c541b532424c497d">SNMP::Message::add</a></div><div class="ttdeci">VarBind * add(const char *oid, BER *value=nullptr)</div><div class="ttdoc">Adds a VarBind.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_message_8h_source.html#l00182">SNMPMessage.h:182</a></div></div>
<div class="ttc" id="aclass_s_n_m_p_1_1_s_n_m_p_html_a2b07468ab8fee2bc1f5061cf65055f25"><div class="ttname"><a href="class_s_n_m_p_1_1_s_n_m_p.html#a2b07468ab8fee2bc1f5061cf65055f25">SNMP::SNMP::send</a></div><div class="ttdeci">bool send(Message *message, const IPAddress ip, const uint16_t port)</div><div class="ttdoc">Network write operation.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_8h_source.html#l00109">SNMP.h:109</a></div></div>
<div class="ttc" id="aclass_s_n_m_p_1_1_type_html_a2f2b2d13883bc7ff2e042ce55d85522ea71726ae3f2a65e3a6b9eb9e74129105e"><div class="ttname"><a href="class_s_n_m_p_1_1_type.html#a2f2b2d13883bc7ff2e042ce55d85522ea71726ae3f2a65e3a6b9eb9e74129105e">SNMP::Type::GetResponse</a></div><div class="ttdeci">@ GetResponse</div><div class="ttdef"><b>Definition</b> <a href="_b_e_r_8h_source.html#l00311">BER.h:311</a></div></div>
<div class="ttc" id="astruct_s_n_m_p_1_1_version_html_a8013940cfd8d8412f5b7d4c4c4e3717ca1d0d1ca017fece1777c8a442b4602adb"><div class="ttname"><a href="struct_s_n_m_p_1_1_version.html#a8013940cfd8d8412f5b7d4c4c4e3717ca1d0d1ca017fece1777c8a442b4602adb">SNMP::Version::V2C</a></div><div class="ttdeci">@ V2C</div><div class="ttdef"><b>Definition</b> <a href="_b_e_r_8h_source.html#l00057">BER.h:57</a></div></div>
</div><!-- fragment --><p>In Arduino <em>loop()</em> function, the agent <em>loop()</em> function must be called frequently.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">    <span class="comment">// Agent loop function must be called to process incoming messages</span></div>
<div class="line">    snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#a22a4a28eada47332beb7061e1325539a">loop</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aclass_s_n_m_p_1_1_s_n_m_p_html_a22a4a28eada47332beb7061e1325539a"><div class="ttname"><a href="class_s_n_m_p_1_1_s_n_m_p.html#a22a4a28eada47332beb7061e1325539a">SNMP::SNMP::loop</a></div><div class="ttdeci">void loop()</div><div class="ttdoc">Network read operation.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_8h_source.html#l00075">SNMP.h:75</a></div></div>
</div><!-- fragment --><p><a href="examples/Agent/Agent.ino">Agent.ino</a> is a complete example of an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> agent implementation.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Manager</h2>
<p>An <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> manager sends request to and receives response from an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> agent.</p>
<p>Declare an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> manager like this. An UDP client is also needed.</p>
<div class="fragment"><div class="line">EthernetUDP udp; <span class="comment">// STM32, use your own platform UDP class</span></div>
<div class="line"><a class="code hl_class" href="class_s_n_m_p_1_1_manager.html">SNMP::Manager</a> snmp;</div>
<div class="ttc" id="aclass_s_n_m_p_1_1_manager_html"><div class="ttname"><a href="class_s_n_m_p_1_1_manager.html">SNMP::Manager</a></div><div class="ttdoc">SNMP manager.</div><div class="ttdef"><b>Definition</b> <a href="_s_n_m_p_8h_source.html#l00175">SNMP.h:175</a></div></div>
</div><!-- fragment --><p>In Arduino <em>setup()</em> function, add code to setup manager.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    Serial.begin(115200);</div>
<div class="line">    <span class="comment">// Ethernet</span></div>
<div class="line">    Ethernet.begin(IPAddress(192, 168, 2, 2), IPAddress(255, 255, 255, 0),</div>
<div class="line">            IPAddress(192, 168, 2, 1), IPAddress(192, 168, 2, 1));</div>
<div class="line">    <span class="comment">// SNMP</span></div>
<div class="line">    snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#ac55c933b9deab01516799988f5fc39a3">begin</a>(udp);</div>
<div class="line">    snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#af72237a388c52442eacc8c607527660e">onMessage</a>(onMessage);</div>
<div class="line">}</div>
</div><!-- fragment --><p>The user function <em>onMessage()</em> will be called every time an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> message is received.</p>
<p>In Arduino <em>loop()</em> function, the manager <em>loop()</em> function must be called frequently.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">    <span class="comment">// Manager loop function must be called to process incoming messages</span></div>
<div class="line">    snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#a22a4a28eada47332beb7061e1325539a">loop</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><p><a href="examples/Manager/Manager.ino">Manager.ino</a> is a complete example of an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> manager implementation.</p>
<p><a href="examples/MPOD/MPOD.ino">MPOD.ino</a> is another example of an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> manager implementation with use of SETREQUEST.</p>
<p><a href="examples/Advanced/Advanced.ino">Advanced.ino</a> is the more complete example. It shows how to write an <a class="el" href="class_s_n_m_p.html" title="Base class for Agent and Manager.">SNMP</a> agent able to handle GETREQUEST, GETNEXTREQUEST, GETBULKREQUEST and SETREQUEST and generate TRAP, INFORMREQUEST and SNMPV2TRAP.</p>
<p>It uses PROGMEM to save enough RAM to allow the sketch to be run even on a basic Arduino Uno board.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Limitations</h1>
<p>Limitations depend on library configuration and available RAM.</p>
<p>If STL vectors are used, there is virtually no limit to the size of messages and the number of items in Sequence objects.</p>
<p>The values ​​of OctetString and ObjectIdentifier objects are now dynamically allocated. The size is limited only by the available memory.</p>
<p>To achieve compatibility with low-end boards like Arduino Uno, the code has been stripped down and almost no checking is done.</p>
<p>For example, when creating an OpaqueBER, the library assumes that the embedded BER parameter passed to the constructor is not null. If null, code will crash as soon as embedded BER members or functions are accessed.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Migrate to version 2.0.0</h1>
<p>Minor changes are required when migrating existing code to version 2.0.0 of the library.</p>
<p>This is mainly due to the change from C-like enum to C++ syntax.</p>
<ul>
<li>All version constants like <em>VERSION2C</em> are now defined in <em>struct Version</em>.<br  />
Replace by <em>Version::V2C</em>.</li>
<li>All error constants like <em>NO_ERROR</em> are now defined in <em>struct Error</em>.<br  />
Replace by <em>Error::NoError</em>.</li>
<li>All trap constants like <em>COLDSTART</em> are now defined in <em>struct Trap</em>.<br  />
Replace by <em>Trap::ColdStart</em>.</li>
<li>All type constants like <em>TYPE_GETRESPONSE</em> are now defined in <em>class Type</em>.<br  />
Replace by <em>Type::GetResponse</em>.</li>
<li><em>Class PORT</em> is replaced by <em>struct Port</em>. Port constant <em>TRAP</em> is renamed as <em>Trap</em>.<br  />
Replace <em>PORT::SNMP</em> by <em>Port::SNMP</em> and <em>PORT::TRAP</em> by <em>Port::Trap</em>.</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// Version 1.4.1</span></div>
<div class="line"><a class="code hl_class" href="class_s_n_m_p_1_1_message.html">SNMP::Message</a> *response = <span class="keyword">new</span> <a class="code hl_class" href="class_s_n_m_p_1_1_message.html">SNMP::Message</a>(SNMP::VERSION2C, <span class="stringliteral">&quot;public&quot;</span>, SNMP::TYPE_GETRESPONSE);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Version 2.0.0</span></div>
<div class="line"><a class="code hl_class" href="class_s_n_m_p_1_1_message.html">SNMP::Message</a> *response = <span class="keyword">new</span> <a class="code hl_class" href="class_s_n_m_p_1_1_message.html">SNMP::Message</a>(<a class="code hl_enumvalue" href="struct_s_n_m_p_1_1_version.html#a8013940cfd8d8412f5b7d4c4c4e3717ca1d0d1ca017fece1777c8a442b4602adb">SNMP::Version::V2C</a>, <span class="stringliteral">&quot;public&quot;</span>, <a class="code hl_enumvalue" href="class_s_n_m_p_1_1_type.html#a2f2b2d13883bc7ff2e042ce55d85522ea71726ae3f2a65e3a6b9eb9e74129105e">SNMP::Type::GetResponse</a>);</div>
</div><!-- fragment --><p>The API changed for <em>SNMP::begin()</em>. The UDP parameter is now a reference and no more a pointer.</p>
<div class="fragment"><div class="line"><span class="comment">// Version 1.4.1</span></div>
<div class="line">snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#ac55c933b9deab01516799988f5fc39a3">begin</a>(&amp;udp);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Version 2.0.0</span></div>
<div class="line">snmp.<a class="code hl_function" href="class_s_n_m_p_1_1_s_n_m_p.html#ac55c933b9deab01516799988f5fc39a3">begin</a>(udp);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Acknowledgements</h1>
<p>This library is inspired by <a href="https://github.com/shortbloke/Arduino_SNMP_Manager">SNMP Manager For ESP8266/ESP32/Arduino (and more)</a> authored by Martin Rowan. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
